/* START OF FILE style.css */

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Poppins:wght@300;400;600&family=Raleway:ital,wght@0,400;0,700;1,400&display=swap');

/* ==========================================================================
   1. Root Variables & Theming
   ========================================================================== */

:root {
    /* Fonts */
    --font-heading: 'Montserrat', sans-serif;
    --font-body: 'Poppins', sans-serif;
    --font-special: 'Raleway', sans-serif;

    /* Border Radius */
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 16px;
    --border-radius-pill: 999px;
    --border-radius-card: 12px;

    /* Shadows & Transitions */
    --shadow-color-rgb: 0, 0, 0;
    --shadow-strength-sm: 0.08;
    --shadow-strength-md: 0.12;
    --shadow-strength-lg: 0.18;
    --transition-fast: all 0.15s ease-out;
    --transition-smooth: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    --transition-bounce: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);

    /* Z-Index */
    --z-index-background: -1;
    --z-index-base: 1;
    --z-index-content: 10;
    --z-index-sticky: 100;
    --z-index-dropdown: 500;
    --z-index-tooltip: 900; /* Added for tooltips */
    --z-index-modal-backdrop: 950; /* Adjusted backdrop z-index */
    --z-index-modal: 1000;
    --z-index-header: 1100;
    --z-index-debug: 9999;

    /* Light Theme Colors */
    --primary-hue-light: 221;
    --secondary-hue-light: 153;
    --accent-hue-light: 264;
    --warning-hue-light: 29;
    --gray-hue-light: 215;
    --primary-color-light: hsl(var(--primary-hue-light), 68%, 40%);
    --secondary-color-light: hsl(var(--secondary-hue-light), 81%, 42%);
    --accent-color-light: hsl(var(--accent-hue-light), 91%, 66%);
    --warning-color-light: hsl(var(--warning-hue-light), 93%, 53%);
    --background-primary-light: hsl(var(--gray-hue-light), 25%, 95%);
    --background-secondary-light: hsl(var(--gray-hue-light), 25%, 100%);
    --background-card-light: hsla(0, 0%, 100%, 0.7);
    --text-primary-light: hsl(var(--gray-hue-light), 28%, 17%);
    --text-secondary-light: hsl(var(--gray-hue-light), 18%, 38%);
    --text-muted-light: hsl(var(--gray-hue-light), 15%, 55%);
    --text-on-primary-light: hsl(0, 0%, 100%);
    --text-on-accent-light: hsl(0, 0%, 100%);
    --border-light: hsl(var(--gray-hue-light), 20%, 83%);
    --border-accent-light: hsla(var(--accent-hue-light), 91%, 66%, 0.5);
    --glass-border-light: hsla(0, 0%, 100%, 0.3);
    --gradient-bg-light: linear-gradient(145deg, hsl(var(--primary-hue-light), 80%, 92%) 0%, hsl(var(--secondary-hue-light), 80%, 94%) 100%);
    --gradient-primary-light: linear-gradient(135deg, hsl(var(--primary-hue-light), 65%, 50%), hsl(var(--accent-hue-light), 80%, 60%));
    --gradient-accent-light: linear-gradient(135deg, hsl(var(--accent-hue-light), 90%, 68%), hsl(var(--secondary-hue-light), 75%, 55%));
    --neon-glow-primary-light: 0 0 5px hsla(var(--primary-hue-light), 70%, 50%, 0.8), 0 0 10px hsla(var(--primary-hue-light), 70%, 50%, 0.6);
    --neon-glow-secondary-light: 0 0 5px hsla(var(--secondary-hue-light), 80%, 50%, 0.8), 0 0 10px hsla(var(--secondary-hue-light), 80%, 50%, 0.6);
    --neon-glow-accent-light: 0 0 5px hsla(var(--accent-hue-light), 90%, 70%, 0.8), 0 0 10px hsla(var(--accent-hue-light), 90%, 70%, 0.6);

    /* Dark Theme Colors */
    --primary-hue-dark: 217;
    --secondary-hue-dark: 153;
    --accent-hue-dark: 260;
    --warning-hue-dark: 32;
    --gray-hue-dark: 223;
    --primary-color-dark: hsl(var(--primary-hue-dark), 91%, 60%);
    --secondary-color-dark: hsl(var(--secondary-hue-dark), 81%, 42%);
    --accent-color-dark: hsl(var(--accent-hue-dark), 87%, 78%);
    --warning-color-dark: hsl(var(--warning-hue-dark), 96%, 60%);
    --background-primary-dark: hsl(var(--gray-hue-dark), 23%, 11%);
    --background-secondary-dark: hsl(var(--gray-hue-dark), 22%, 16%);
    --background-card-dark: hsla(var(--gray-hue-dark), 22%, 16%, 0.6);
    --text-primary-dark: hsl(var(--gray-hue-dark), 25%, 95%);
    --text-secondary-dark: hsl(var(--gray-hue-dark), 15%, 78%);
    --text-muted-dark: hsl(var(--gray-hue-dark), 14%, 55%);
    --text-on-primary-dark: hsl(0, 0%, 100%);
    --text-on-accent-dark: hsl(var(--gray-hue-dark), 23%, 11%);
    --border-dark: hsl(var(--gray-hue-dark), 18%, 28%);
    --border-accent-dark: hsla(var(--accent-hue-dark), 87%, 78%, 0.4);
    --glass-border-dark: hsla(0, 0%, 100%, 0.1);
    --gradient-bg-dark: linear-gradient(145deg, hsl(var(--gray-hue-dark), 22%, 18%) 0%, hsl(var(--gray-hue-dark), 23%, 10%) 100%);
    --gradient-primary-dark: linear-gradient(135deg, hsl(var(--primary-hue-dark), 90%, 65%), hsl(var(--accent-hue-dark), 85%, 75%));
    --gradient-accent-dark: linear-gradient(135deg, hsl(var(--accent-hue-dark), 88%, 80%), hsl(var(--secondary-hue-dark), 80%, 50%));
    --neon-glow-primary-dark: 0 0 8px hsla(var(--primary-hue-dark), 90%, 65%, 0.9), 0 0 15px hsla(var(--primary-hue-dark), 90%, 65%, 0.7), 0 0 20px hsla(var(--primary-hue-dark), 90%, 70%, 0.5);
    --neon-glow-secondary-dark: 0 0 8px hsla(var(--secondary-hue-dark), 80%, 50%, 0.9), 0 0 15px hsla(var(--secondary-hue-dark), 80%, 50%, 0.7), 0 0 20px hsla(var(--secondary-hue-dark), 80%, 55%, 0.5);
    --neon-glow-accent-dark: 0 0 8px hsla(var(--accent-hue-dark), 90%, 80%, 0.9), 0 0 15px hsla(var(--accent-hue-dark), 90%, 80%, 0.7), 0 0 20px hsla(var(--accent-hue-dark), 90%, 85%, 0.5);

    /* Default (Light Theme) */
    --primary-color: var(--primary-color-light);
    --secondary-color: var(--secondary-color-light);
    --accent-color: var(--accent-color-light);
    --warning-color: var(--warning-color-light);
    --background-primary: var(--background-primary-light);
    --background-secondary: var(--background-secondary-light);
    --background-card: var(--background-card-light);
    --text-primary: var(--text-primary-light);
    --text-secondary: var(--text-secondary-light);
    --text-muted: var(--text-muted-light);
    --text-on-primary: var(--text-on-primary-light);
    --text-on-accent: var(--text-on-accent-light);
    --border: var(--border-light);
    --border-accent: var(--border-accent-light);
    --glass-border: var(--glass-border-light);
    --gradient-bg: var(--gradient-bg-light);
    --gradient-primary: var(--gradient-primary-light);
    --gradient-accent: var(--gradient-accent-light);
    --neon-glow-primary: var(--neon-glow-primary-light);
    --neon-glow-secondary: var(--neon-glow-secondary-light);
    --neon-glow-accent: var(--neon-glow-accent-light);
    --shadow-sm: 0 2px 4px rgba(var(--shadow-color-rgb), var(--shadow-strength-sm));
    --shadow-md: 0 4px 8px rgba(var(--shadow-color-rgb), var(--shadow-strength-md));
    --shadow-lg: 0 10px 20px rgba(var(--shadow-color-rgb), var(--shadow-strength-lg));
    --shadow-inset: inset 0 2px 4px rgba(var(--shadow-color-rgb), 0.06);
}

[data-theme="dark"] {
    --primary-color: var(--primary-color-dark);
    --secondary-color: var(--secondary-color-dark);
    --accent-color: var(--accent-color-dark);
    --warning-color: var(--warning-color-dark);
    --background-primary: var(--background-primary-dark);
    --background-secondary: var(--background-secondary-dark);
    --background-card: var(--background-card-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --text-muted: var(--text-muted-dark);
    --text-on-primary: var(--text-on-primary-dark);
    --text-on-accent: var(--text-on-accent-dark);
    --border: var(--border-dark);
    --border-accent: var(--border-accent-dark);
    --glass-border: var(--glass-border-dark);
    --gradient-bg: var(--gradient-bg-dark);
    --gradient-primary: var(--gradient-primary-dark);
    --gradient-accent: var(--gradient-accent-dark);
    --neon-glow-primary: var(--neon-glow-primary-dark);
    --neon-glow-secondary: var(--neon-glow-secondary-dark);
    --neon-glow-accent: var(--neon-glow-accent-dark);
    --shadow-color-rgb: 0, 0, 0;
    --shadow-strength-sm: 0.15;
    --shadow-strength-md: 0.25;
    --shadow-strength-lg: 0.35;
    --shadow-sm: 0 2px 6px rgba(var(--shadow-color-rgb), var(--shadow-strength-sm));
    --shadow-md: 0 5px 12px rgba(var(--shadow-color-rgb), var(--shadow-strength-md));
    --shadow-lg: 0 12px 25px rgba(var(--shadow-color-rgb), var(--shadow-strength-lg));
    --shadow-inset: inset 0 2px 4px rgba(var(--shadow-color-rgb), 0.15);
}

/* ==========================================================================
   2. Base Styles & Reset
   ========================================================================== */

*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

html {
    font-size: 100%; /* Use 100% for better browser scaling */
    scroll-behavior: smooth;
    color-scheme: light dark; /* Inform browser about supported themes */
    height: 100%; /* Needed for min-height on body */
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh; /* Ensure footer stays at bottom */
    font-family: var(--font-body);
    font-size: clamp(1rem, 1.05vw + 0.5rem, 1.125rem); /* Responsive font size */
    line-height: 1.65;
    color: var(--text-primary);
    background-color: var(--background-primary);
    overflow-x: hidden; /* Prevent horizontal scroll */
    position: relative; /* Needed for absolute positioned elements like background */
    transition: background-color 0.4s ease, color 0.4s ease;
}

img, picture, video, canvas, svg {
    display: block;
    max-width: 100%;
    height: auto; /* Maintain aspect ratio */
}

input, button, textarea, select {
    font: inherit; /* Inherit font styles from body */
    border: none;
    outline: none;
    background: none;
    color: inherit;
    border-radius: 0; /* Reset default radius */
}

button {
    cursor: pointer;
    background-color: transparent;
    color: inherit;
    padding: 0;
    border: none;
}

a {
    color: var(--accent-color);
    text-decoration: none;
    transition: var(--transition-smooth);
    position: relative; /* For pseudo-element underline */
}
/* Animated underline effect */
a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 1px;
    bottom: -2px;
    left: 0;
    background-color: var(--accent-color);
    transition: width 0.3s ease;
}
a:hover::after, a:focus::after { width: 100%; }
/* Link hover/focus state */
a:hover, a:focus {
    color: var(--primary-color);
    text-decoration: none; /* Ensure no default underline interferes */
    outline: none; /* Remove default browser outline */
}
/* Custom focus outline for accessibility */
a:focus-visible {
    outline: 2px dashed var(--accent-color);
    outline-offset: 2px;
    border-radius: var(--border-radius-sm);
}

ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Text Selection Styling */
::selection {
    background-color: hsla(var(--accent-hue-light), 90%, 70%, 0.8);
    color: var(--text-on-accent); /* Use theme variable */
}
[data-theme="dark"] ::selection {
    background-color: hsla(var(--accent-hue-dark), 80%, 85%, 0.8);
    color: var(--text-on-accent-dark); /* Use theme variable */
}

/* Custom Scrollbars */
/* Webkit (Chrome, Safari, Edge) */
body::-webkit-scrollbar { width: 10px; }
body::-webkit-scrollbar-track { background: var(--background-secondary); }
body::-webkit-scrollbar-thumb {
    background-color: var(--primary-color);
    border-radius: var(--border-radius-pill);
    border: 2px solid var(--background-secondary); /* Creates padding around thumb */
}
body::-webkit-scrollbar-thumb:hover { background-color: var(--accent-color); }
/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) var(--background-secondary);
}


/* ==========================================================================
   3. Typography
   ========================================================================== */

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 0.75em;
    line-height: 1.2;
    color: var(--text-primary);
    text-shadow: 1px 1px 2px rgba(var(--shadow-color-rgb), 0.1); /* Subtle text shadow */
}

h1 { font-size: clamp(2.2rem, 5vw + 1rem, 3rem); }
h2 { font-size: clamp(1.8rem, 4vw + 1rem, 2.5rem); }
h3 { font-size: clamp(1.5rem, 3vw + 1rem, 2rem); }
h4 { font-size: clamp(1.2rem, 2vw + 1rem, 1.6rem); text-transform: none; font-weight: 700; }
h5 { font-size: clamp(1.1rem, 1.5vw + 1rem, 1.3rem); text-transform: none; font-weight: 700; color: var(--text-secondary); }
h6 { font-size: clamp(1rem, 1vw + 1rem, 1.1rem); text-transform: none; font-weight: 700; color: var(--text-muted); letter-spacing: 1px; }

p {
    margin-bottom: 1.25rem;
    max-width: 75ch; /* Limit paragraph width for readability */
}
p:last-child { margin-bottom: 0; } /* Remove bottom margin from last paragraph in a container */

/* Lead paragraph style */
p.lead {
    font-size: clamp(1.1rem, 1.2vw + 0.8rem, 1.25rem);
    color: var(--text-secondary);
    font-weight: 400;
}

strong, b { font-weight: 600; } /* Slightly less bold than default */
em, i { font-family: var(--font-special); font-style: italic; }

blockquote {
    border-left: 4px solid var(--accent-color);
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    background-color: var(--background-secondary);
    font-family: var(--font-special);
    font-style: italic;
    color: var(--text-secondary);
    box-shadow: var(--shadow-sm);
    border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
}
blockquote cite {
    display: block;
    margin-top: 0.8rem;
    font-style: normal;
    font-weight: 600;
    font-family: var(--font-body);
    color: var(--text-muted);
    font-size: 0.9em;
}

code, kbd, samp, pre {
  font-family: monospace; /* Standard monospace */
  font-size: 1em; /* Match surrounding text size */
}
pre {
    background-color: var(--background-secondary);
    padding: 1rem;
    border-radius: var(--border-radius-md);
    overflow-x: auto; /* Allow horizontal scroll for long lines */
    border: 1px solid var(--border);
    box-shadow: var(--shadow-inset);
}

/* Specific Text Styles */
.portal-title { font-weight: 700; }
.portal-subtitle {
    font-family: var(--font-special);
    text-transform: none;
    font-size: clamp(1rem, 1.5vw + 0.5rem, 1.2rem);
    color: var(--text-secondary);
    letter-spacing: 0.8px;
    font-weight: 400;
    margin-top: -0.5rem; /* Adjust spacing relative to title */
}
.footer-text {
    font-family: var(--font-special);
    font-size: 1rem;
    color: var(--text-muted);
    letter-spacing: 1px;
}
.futuristic-text { /* Example special text style */
    font-family: var(--font-special);
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--accent-color);
    text-shadow: var(--neon-glow-accent);
}
.danger-text { /* Utility class for warning/delete actions */
    color: var(--warning-color) !important;
}
.danger-text:hover {
    background-color: hsla(var(--warning-hue-light), 93%, 53%, 0.1);
}
[data-theme="dark"] .danger-text:hover {
    background-color: hsla(var(--warning-hue-dark), 96%, 60%, 0.1);
}

/* ==========================================================================
   4. Layout & Structure
   ========================================================================== */

.page-wrapper {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    width: 100%;
    position: relative; /* For stacking context */
    z-index: var(--z-index-base);
}

/* Animated Background Layer */
/* START CONTINUATION OF style.css */

.background-layer {
    position: fixed; /* Fixed position covers viewport */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%; /* Corrected: Was missing % */
    background: var(--gradient-bg);
    z-index: var(--z-index-background); /* Behind everything else */
    overflow: hidden; /* Prevent content overflow */
    animation: backgroundGradientShift 25s ease infinite alternate;
    background-size: 400% 400%; /* For gradient animation */
}
/* Noise overlay */
.background-layer::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    /* Subtle dot pattern SVG */
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" width="80" height="80"><circle cx="40" cy="40" r="1" fill="%23FFF" opacity="0.1"/></svg>');
    background-size: 40px 40px;
    opacity: 0.05; /* Very subtle */
    animation: backgroundNoise 10s linear infinite alternate;
    pointer-events: none; /* Don't interfere with clicks */
}
[data-theme="dark"] .background-layer::before { opacity: 0.03; } /* Even more subtle in dark mode */


/* Main Container */
.container {
    width: 100%;
    max-width: 1400px; /* Max width for large screens */
    margin: 0 auto; /* Center align */
    padding: 0 1.5rem; /* Default padding */
}

/* Main Content Area */
.main-content {
    flex-grow: 1; /* Take up remaining vertical space */
    padding-top: 100px; /* Space for fixed header (adjust if header height changes) */
    padding-bottom: 4rem; /* Space before footer */
}

/* Page Header */
.page-header {
    position: fixed; /* Stick to top */
    top: 0;
    left: 0;
    width: 100%;
    z-index: var(--z-index-header);
    padding: 0.8rem 0;
    transition: var(--transition-smooth); /* Smooth background/shadow changes */
    box-shadow: none; /* Initial state */
    background-color: transparent; /* Initial state */
    border-bottom: 1px solid transparent; /* Placeholder for scrolled state border */
}
/* Scrolled Header State */
.page-header.scrolled {
    background-color: hsla(var(--gray-hue-light), 25%, 95%, 0.8); /* Semi-transparent bg */
    backdrop-filter: blur(10px); /* Glass effect */
    -webkit-backdrop-filter: blur(10px); /* Safari */
    box-shadow: var(--shadow-md); /* Add shadow when scrolled */
    border-bottom: 1px solid var(--glass-border); /* Subtle border */
}
[data-theme="dark"] .page-header.scrolled {
    background-color: hsla(var(--gray-hue-dark), 23%, 11%, 0.7);
     border-bottom: 1px solid var(--glass-border);
}

.page-header .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Portal Link (Logo + Title) */
.portal-link { display: flex; align-items: center; gap: 0.8rem; }
.portal-link:hover { opacity: 1; } /* Override default link hover if needed */
.portal-link:hover::after { width: 0; } /* Prevent underline on logo link */

.portal-logo {
    height: 40px;
    width: auto;
    transition: transform 0.3s ease;
}
.portal-link:hover .portal-logo { transform: rotate(-5deg) scale(1.05); } /* Fun hover effect */

/* Responsive Title (if needed, controlled by media queries or JS) */
.portal-title-short { display: none; } /* Hide short title by default */
.portal-title-full {
    font-size: clamp(1.2rem, 2vw + 0.5rem, 1.6rem);
    margin: 0; /* Override default heading margin */
    font-weight: 800;
    color: var(--primary-color);
    text-shadow: none; /* Override default heading shadow if needed */
}
[data-theme="dark"] .portal-title-full { color: var(--accent-color); }

/* User Actions Area */
.user-actions {
    display: flex;
    align-items: center;
    gap: 1.2rem; /* Spacing between buttons/text */
}

.welcome-message {
    font-size: 0.95rem;
    color: var(--text-secondary);
    white-space: nowrap; /* Prevent wrapping */
    display: none; /* Hide by default on smaller screens */
}
@media (min-width: 576px) { /* Show welcome message on larger screens */
    .welcome-message { display: inline; }
}
.welcome-message strong {
    color: var(--text-primary);
    font-weight: 600;
}

/* Page Footer */
.page-footer {
    padding: 2rem 1rem;
    text-align: center;
    margin-top: auto; /* Push to bottom */
    background-color: var(--background-secondary);
    border-top: 1px solid var(--border);
    z-index: var(--z-index-base); /* Ensure above background */
}

/* Basic Grid System */
.grid-container {
    display: grid;
    gap: 1.5rem; /* Default gap */
}
.grid-cols-1 { grid-template-columns: 1fr; }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
.grid-cols-auto-fit { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); } /* Responsive columns */

/* Gap Utilities */
.gap-1 { gap: 0.5rem; }
.gap-2 { gap: 1rem; }
.gap-3 { gap: 1.5rem; }
.gap-4 { gap: 2rem; }

/* Dashboard Specific Layout */
.dashboard-heading {
    margin-bottom: 2.5rem;
    text-align: center;
    color: var(--primary-color);
    font-weight: 800;
    position: relative;
    padding-bottom: 0.5rem;
}
/* Underline effect for dashboard heading */
.dashboard-heading::after {
    content: '';
    position: absolute;
    bottom: 0; left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 3px;
    background: var(--gradient-accent);
    border-radius: 2px;
}

.dashboard-grid { display: grid; gap: 1.8rem; } /* General dashboard grid */


/* ==========================================================================
   5. Components
   ========================================================================== */

/* --- Buttons --- */
.btn {
    display: inline-flex; /* Use inline-flex for alignment */
    align-items: center;
    justify-content: center;
    gap: 0.5em; /* Space between icon and text */
    padding: 0.75rem 1.75rem; /* Default padding */
    border-radius: var(--border-radius-md);
    font-family: var(--font-heading);
    font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth), transform 0.1s ease; /* Smooth transitions */
    position: relative; /* For ripple effect and potential pseudo-elements */
    overflow: hidden; /* Contain ripple effect */
    border: 2px solid transparent; /* Placeholder for bordered buttons */
    line-height: 1.4; /* Consistent line height */
    white-space: nowrap; /* Prevent text wrapping */
}
/* Focus visible state for accessibility */
.btn:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 3px;
}
/* Disabled state */
.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none !important; /* Remove shadow */
    transform: none !important; /* Remove transform effects */
}

/* Primary Button */
.btn-primary {
    background: var(--gradient-primary);
    color: var(--text-on-primary);
    /* 3D-like shadow effect */
    box-shadow: 0 5px 0 hsl(var(--primary-hue-light), 70%, 30%),
                0 8px 15px rgba(var(--shadow-color-rgb), 0.2);
    border-color: hsl(var(--primary-hue-light), 70%, 30%);
}
.btn-primary:hover {
    transform: translateY(-2px); /* Lift effect */
    box-shadow: 0 7px 0 hsl(var(--primary-hue-light), 70%, 30%),
                0 12px 20px rgba(var(--shadow-color-rgb), 0.25); /* Increased shadow */
    filter: brightness(1.15); /* Make slightly brighter */
}
.btn-primary:active {
    transform: translateY(3px); /* Push down effect */
    box-shadow: 0 2px 0 hsl(var(--primary-hue-light), 70%, 30%),
                0 4px 8px rgba(var(--shadow-color-rgb), 0.2); /* Reduced shadow */
}
/* Dark theme primary button adjustments */
[data-theme="dark"] .btn-primary {
    background: var(--gradient-primary-dark);
    box-shadow: 0 5px 0 hsl(var(--primary-hue-dark), 80%, 40%),
                0 8px 15px rgba(var(--shadow-color-rgb), 0.3);
    border-color: hsl(var(--primary-hue-dark), 80%, 40%);
}
[data-theme="dark"] .btn-primary:hover {
     box-shadow: 0 7px 0 hsl(var(--primary-hue-dark), 80%, 40%),
                0 12px 20px rgba(var(--shadow-color-rgb), 0.35);
    filter: brightness(1.15);
}
[data-theme="dark"] .btn-primary:active {
     box-shadow: 0 2px 0 hsl(var(--primary-hue-dark), 80%, 40%),
                 0 4px 8px rgba(var(--shadow-color-rgb), 0.3);
}

/* Secondary Button (Outlined) */
.btn-secondary {
    background-color: transparent;
    color: var(--primary-color);
    border-color: var(--primary-color);
}
.btn-secondary:hover {
    background-color: var(--primary-color); /* Fill on hover */
    color: var(--text-on-primary); /* Text changes to contrast */
    transform: scale(1.03); /* Slight scale */
    box-shadow: var(--shadow-sm);
    filter: brightness(1.1);
}
.btn-secondary:active { transform: scale(0.98); } /* Push down effect */

/* Accent Button */
.btn-accent {
    background-color: var(--accent-color);
    color: var(--text-on-accent);
    box-shadow: var(--shadow-md);
}
.btn-accent:hover {
    background-color: hsl(var(--accent-hue-light), 90%, 70%); /* Slightly lighter accent */
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-lg), var(--neon-glow-accent); /* Glow effect */
    filter: brightness(1.1);
}
.btn-accent:active { transform: translateY(1px) scale(0.98); }
/* Dark theme accent button adjustments */
[data-theme="dark"] .btn-accent {
    background-color: var(--accent-color-dark);
    color: var(--text-on-accent-dark);
}
[data-theme="dark"] .btn-accent:hover {
    background-color: hsl(var(--accent-hue-dark), 85%, 82%);
     box-shadow: var(--shadow-lg), var(--neon-glow-accent-dark);
    filter: brightness(1.1);
}

/* Ghost Button (Minimal style) */
.btn-ghost {
    background-color: transparent;
    color: var(--text-secondary);
    border-color: transparent;
    box-shadow: none;
}
.btn-ghost:hover {
    color: var(--primary-color);
    background-color: hsla(var(--primary-hue-light), 68%, 40%, 0.05); /* Subtle background */
    filter: brightness(1.1);
}
[data-theme="dark"] .btn-ghost:hover {
    background-color: hsla(var(--primary-hue-dark), 91%, 60%, 0.1);
}

/* Button Sizes */
.btn-sm { padding: 0.5rem 1.2rem; font-size: 0.875rem; }
.btn-lg { padding: 1rem 2.2rem; font-size: 1.125rem; }
/* Block Button (Full width) */
.btn-block { display: flex; width: 100%; }

/* Button Icons */
.btn i, .btn svg {
    font-size: 1.1em; /* Slightly larger than text */
    /* margin-right: 0.5em; */ /* Replaced by gap in .btn */
    line-height: 1; /* Prevent extra vertical space */
}
/* .btn .icon-right { margin-right: 0; margin-left: 0.5em; } */ /* Replaced by gap */
/* Icon-only Button */
.btn-icon-only { padding: 0.75rem; gap: 0; } /* Square padding, no gap */
.btn-icon-only i, .btn-icon-only svg { margin: 0; } /* Remove margin */

/* Icon Button (Standalone, circular) */
.icon-button {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.3rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 50%; /* Circular */
    transition: var(--transition-smooth);
    line-height: 1; /* Ensure icon is centered */
    display: inline-flex; /* Align icon */
    align-items: center;
    justify-content: center;
    position: relative; /* For ripple */
    overflow: hidden;
}
.icon-button:hover,
.icon-button:focus {
    color: var(--accent-color);
    background-color: hsla(var(--accent-hue-light), 90%, 70%, 0.1); /* Accent highlight */
    transform: rotate(15deg) scale(1.1); /* Fun rotate/scale effect */
    outline: none;
}
[data-theme="dark"] .icon-button:hover,
[data-theme="dark"] .icon-button:focus {
    background-color: hsla(var(--accent-hue-dark), 80%, 80%, 0.1);
}

/* Ripple Effect Span (Added by JS) */
.ripple {
    position: absolute;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.5); /* Light theme ripple */
    transform: scale(0);
    animation: ripple-animation 0.6s linear;
    pointer-events: none; /* Doesn't block clicks on button */
}
[data-theme="dark"] .ripple { background-color: rgba(0, 0, 0, 0.3); } /* Dark theme ripple */


/* --- Cards --- */
.card {
    border-radius: var(--border-radius-card);
    overflow: hidden; /* Clip content/shadows to rounded corners */
    transition: var(--transition-smooth);
    position: relative; /* For positioning pseudo-elements or icons */
    background-color: var(--background-secondary);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-md); /* Default shadow */
    display: flex; /* Enable flex for vertical content management */
    flex-direction: column; /* Stack header/content/footer vertically */
}
/* Padded Card Content */
.card-padded { padding: clamp(1rem, 3vw, 1.8rem); } /* Responsive padding */
/* Hover Effects */
.card-hover-lift:hover {
    transform: translateY(-8px) scale(1.02); /* Lift and slightly enlarge */
    box-shadow: 0 18px 35px rgba(var(--shadow-color-rgb), var(--shadow-strength-lg)); /* Stronger shadow */
}
.card-hover-glow:hover {
    box-shadow: var(--shadow-md), 0 0 20px hsla(var(--accent-hue-light), 90%, 70%, 0.3); /* Add accent glow */
}
[data-theme="dark"] .card-hover-glow:hover {
     box-shadow: var(--shadow-md), 0 0 25px hsla(var(--accent-hue-dark), 80%, 80%, 0.25);
}

/* Glassmorphism Card Style */
.card-glass {
    background-color: var(--background-card); /* Semi-transparent background */
    backdrop-filter: blur(15px) saturate(180%); /* Blur and saturate effect */
    -webkit-backdrop-filter: blur(15px) saturate(180%); /* Safari */
    border: 1px solid var(--glass-border); /* Subtle border */
    box-shadow: 0 8px 32px 0 rgba(var(--shadow-color-rgb), 0.2); /* Softer shadow for glass */
}
/* Inner glow effect for glass card */
.card-glass::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: inherit; /* Match card's radius */
    box-shadow: inset 0 0 80px rgba(255, 255, 255, 0.05); /* Inner white glow */
    pointer-events: none;
     opacity: 0; /* Hidden by default */
     transition: opacity 0.4s ease; /* Fade in */
}
.card-glass:hover::before { opacity: 1; } /* Show glow on hover */

/* Card Header */
.card-header {
    display: flex;
    align-items: center;
    gap: 1rem; /* Space between icon and title */
    padding: 1rem 1.5rem; /* Header padding */
    border-bottom: 1px solid var(--border);
    background-color: hsla(0, 0%, 0%, 0.02); /* Very subtle background */
    flex-shrink: 0; /* Prevent shrinking */
}
/* Glass card header adjustments */
.card-glass .card-header {
    border-bottom: 1px solid var(--glass-border); /* Use glass border */
     background-color: transparent; /* No extra background */
}
/* Ensure headings in header don't have bottom margin */
.card-header h3, .card-header h4, .card-header .card-title { margin-bottom: 0; }
/* Card Title Specific Styles (within header) */
.card-title {
    font-size: 1.3rem;
    font-weight: 700;
    letter-spacing: 1px;
    /* text-transform: uppercase; */ /* Removed uppercase for less shouting */
}

/* Card Icon */
.card-icon {
    font-size: 1.8rem;
    color: var(--accent-color);
    width: 40px; height: 40px; /* Fixed size circle */
    display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    background-color: hsla(var(--accent-hue-light), 90%, 70%, 0.1); /* Subtle accent background */
    flex-shrink: 0; /* Prevent shrinking */
    transition: var(--transition-smooth);
}
/* Card icon hover effect (when card is hovered) */
.card:hover .card-icon {
    transform: rotate(-10deg) scale(1.1); /* Rotate and scale */
    background-color: hsla(var(--accent-hue-light), 90%, 70%, 0.2); /* Slightly stronger background */
    box-shadow: var(--neon-glow-accent); /* Add neon glow */
}
[data-theme="dark"] .card-icon {
     background-color: hsla(var(--accent-hue-dark), 80%, 80%, 0.1);
}
[data-theme="dark"] .card:hover .card-icon {
     background-color: hsla(var(--accent-hue-dark), 80%, 80%, 0.2);
     box-shadow: var(--neon-glow-accent-dark); /* Use dark theme glow */
}

/* Card Content Area */
.card-content {
    padding: 1.5rem; /* Default padding - May be overridden by more specific rules or inline styles */
    flex-grow: 1; /* Allow content to fill vertical space */
    overflow-y: auto; /* Enable scroll IF content exceeds card height (important for scrollable lists) */
    /* Apply custom scrollbar to card content if it scrolls */
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color) transparent;
}
.card-content::-webkit-scrollbar { width: 8px; }
.card-content::-webkit-scrollbar-track { background: transparent; }
.card-content::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }

/* Glass card content padding */
.card-glass .card-content { padding: 1.5rem; }

/* Info Item (Label/Value pairs) */
.info-item {
    display: flex;
    justify-content: space-between;
    align-items: baseline; /* Align text baselines */
    margin-bottom: 0.8rem;
    font-size: 1rem;
    border-bottom: 1px dashed var(--border); /* Dashed separator */
    padding-bottom: 0.8rem;
}
.info-item:last-child { border-bottom: none; margin-bottom: 0; } /* Remove border on last item */
.info-label {
    font-weight: 600;
    color: var(--primary-color);
    opacity: 0.8; /* Slightly faded label */
    margin-right: 1rem; /* Space between label and value */
    flex-shrink: 0; /* Prevent label from shrinking */
}
.info-value {
    text-align: right; /* Align value to the right */
    color: var(--secondary-color);
    font-weight: 600;
    word-break: break-word; /* Allow long values to wrap */
}


/* --- Forms --- */
.form-group {
    margin-bottom: 1.8rem;
    position: relative; /* Needed for floating label */
}

/* Floating Label specific styles */
.form-group label {
    position: absolute;
    left: 1rem; /* Initial horizontal position */
    top: 0.9rem; /* Initial vertical position (aligned with input text) */
    font-size: 1rem;
    color: var(--text-muted);
    pointer-events: none; /* Allow clicks to pass through to input */
    transition: all 0.2s ease-out;
    background-color: var(--background-secondary); /* Match input default bg for overlap */
    padding: 0 0.3rem; /* Padding to lift label above border line */
    white-space: nowrap; /* Prevent wrapping */
    z-index: 1; /* Above input background, below focused input */
}

/* Adjust label position if there's an input icon (assuming icon is ~3rem wide with padding) */
.input-wrapper + label, /* Label immediately follows wrapper */
.input-wrapper > label { /* Label is inside wrapper (less common) */
    left: 3rem; /* Move label right to clear icon */
}
/* Ensure textarea label starts at the same vertical position */
.form-group textarea + label { top: 0.9rem; }
/* Adjust label for date input (usually doesn't use placeholder trick) */
.form-group input[type="date"] + label {
    top: -0.6rem; font-size: 0.8rem; color: var(--text-muted);
}


/* Form Control (Input, Textarea, Select) */
.form-control {
    width: 100%;
    padding: 0.9rem 1rem; /* Default padding */
    border: 1px solid var(--border);
    border-radius: var(--border-radius-md);
    background-color: var(--background-secondary);
    color: var(--text-primary);
    transition: var(--transition-smooth);
    font-size: 1rem;
    position: relative; /* For z-index interaction with label */
    z-index: 0; /* Below floating label when not focused */
}
/* Date input specific styling */
input[type="date"].form-control {
  color-scheme: dark light; /* Hint browser for date picker theme */
  /* Apply theme text color or date picker might be hard to read */
  color: var(--text-primary);
}
[data-theme="dark"] input[type="date"].form-control {
    color-scheme: dark; /* Force dark date picker */
}

/* Textarea specific adjustments */
.form-group textarea.form-control {
    min-height: 120px;
    line-height: 1.5; /* Improve readability */
    resize: vertical; /* Allow vertical resize only */
}
/* Small form control variant */
.form-control-sm {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    font-size: 0.9rem;
}
/* Adjust input padding if icon is present */
.input-wrapper .form-control {
    padding-left: 3rem; /* Make space for the icon on the left */
}

/* --- Password Input Specific Padding --- */
/* Corrected: Target password input within its wrapper */
.input-wrapper input[type="password"].form-control,
.input-wrapper input#password.form-control { /* Target by ID as well for robustness */
    padding-right: 3.5rem !important; /* Increase right padding for toggle icon. Use !important if specificity issues arise */
}


/* Label Floating Behavior (when input focused or has value) */
.form-group input.form-control:focus + label,
.form-group input.form-control:not(:placeholder-shown) + label,
.form-group textarea.form-control:focus + label,
.form-group textarea.form-control:not(:placeholder-shown) + label {
    top: -0.6rem; /* Move label up */
    left: 0.8rem; /* Adjust horizontal position */
    font-size: 0.8rem; /* Shrink label */
    color: var(--accent-color); /* Change color */
    background-color: var(--background-secondary); /* Needs to match input focus bg */
    z-index: 2; /* Move label above focused input border/shadow */
}

/* Adjust floated label position if icon is present */
.input-wrapper input.form-control:focus + label,
.input-wrapper input.form-control:not(:placeholder-shown) + label {
     left: 2.8rem; /* Adjust floated label position to align after icon */
}
/* Dark mode specific background for floated label */
[data-theme="dark"] .form-group input.form-control:focus + label,
[data-theme="dark"] .form-group textarea.form-control:focus + label {
     background-color: var(--background-secondary-dark); /* Match dark input bg */
}


/* Input Focus State */
.form-group .form-control:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px hsla(var(--accent-hue-light), 91%, 66%, 0.3); /* Accent glow */
    background-color: var(--background-secondary); /* Ensure focus bg matches floated label bg */
    z-index: 1; /* Bring focused input above normal label state */
}
[data-theme="dark"] .form-group .form-control:focus {
     box-shadow: 0 0 0 3px hsla(var(--accent-hue-dark), 87%, 78%, 0.3);
     background-color: var(--background-secondary-dark);
}

/* Input Wrapper (for icon positioning) */
.input-wrapper { position: relative; }

/* Input Icon */
.input-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    transition: var(--transition-smooth);
    font-size: 1.2rem;
    pointer-events: none; /* Don't block input focus */
    z-index: 2; /* Above input background */
}
/* Change icon color when input is focused */
.input-wrapper:focus-within .input-icon { color: var(--accent-color); }

/* --- Password Visibility Toggle Button --- */
/* Corrected positioning */
.password-toggle {
    position: absolute;
    right: 0.8rem; /* Position near the right edge, within padding */
    top: 50%;
    transform: translateY(-50%); /* Center vertically */
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.6rem; /* Clickable area */
    border-radius: 50%;
    transition: var(--transition-smooth);
    display: flex; /* Center icon inside button */
    align-items: center;
    justify-content: center;
    z-index: 2; /* Above input */
}
.password-toggle:hover {
    color: var(--accent-color);
    background-color: hsla(var(--accent-hue-light), 91%, 66%, 0.1); /* Highlight background */
}
[data-theme="dark"] .password-toggle:hover {
    background-color: hsla(var(--accent-hue-dark), 87%, 78%, 0.1);
}


/* Form Feedback & Error Messages */
.feedback-message, /* General feedback (can be success, error, info) */
.error-message { /* General error message (often for form-level errors) */
    font-size: 0.9rem;
    margin-top: 0.6rem;
    min-height: 1.3em; /* Prevent layout shifts */
    font-weight: 600;
    display: block; /* Take full width */
    text-align: center; /* Center align by default */
    padding: 0.2rem 0.5rem; /* Added some padding */
    border-radius: var(--border-radius-sm); /* Rounded corners */
}
/* Specific error shake animation */
.error-message.global-error {
     animation: shake 0.4s ease-in-out;
     background-color: hsla(var(--warning-hue-light), 93%, 53%, 0.1); /* Subtle background for global error */
}
[data-theme="dark"] .error-message.global-error {
    background-color: hsla(var(--warning-hue-dark), 96%, 60%, 0.15);
}

/* Color variations for feedback */
.error-message { color: var(--warning-color); } /* Use warning color for errors */
.feedback-message.success { color: var(--secondary-color); background-color: hsla(var(--secondary-hue-light), 81%, 42%, 0.1); }
.feedback-message.error { color: var(--warning-color); background-color: hsla(var(--warning-hue-light), 93%, 53%, 0.1); }
.feedback-message.info { color: var(--text-muted); background-color: hsla(var(--gray-hue-light), 15%, 55%, 0.1); }

[data-theme="dark"] .feedback-message.success { background-color: hsla(var(--secondary-hue-dark), 81%, 42%, 0.15); }
[data-theme="dark"] .feedback-message.error { background-color: hsla(var(--warning-hue-dark), 96%, 60%, 0.15); }
[data-theme="dark"] .feedback-message.info { background-color: hsla(var(--gray-hue-dark), 14%, 55%, 0.15); }

/* Hide feedback message utility */
.feedback-message.hidden { display: none; }


/* Field-level error text */
.error-text {
     color: var(--warning-color);
    font-size: 0.85rem;
    display: block; /* Ensure it takes space */
    min-height: 1.1em; /* Prevent layout shift */
    margin-top: 0.3rem; /* Space below input */
    padding-left: 0.5rem; /* Slight indent */
}
/* Invalid Input State */
.form-group .form-control.invalid {
    border-color: var(--warning-color); /* Red border */
}
.form-group .form-control.invalid:focus {
    /* Warning color glow on focus */
    box-shadow: 0 0 0 3px hsla(var(--warning-hue-light), 93%, 53%, 0.3);
}
[data-theme="dark"] .form-group .form-control.invalid:focus {
    box-shadow: 0 0 0 3px hsla(var(--warning-hue-dark), 96%, 60%, 0.3);
}


/* --- Lists --- */
.data-list { margin-top: 1rem; } /* Default top margin */
.data-list-item {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
    transition: var(--transition-smooth);
    font-size: 0.95rem;
    position: relative; /* For hover effect */
    overflow: hidden; /* Contain hover effect */
}
.data-list-item:last-child { border-bottom: none; } /* Remove border on last item */
/* Hover background slide effect */
.data-list-item::before {
    content: '';
    position: absolute;
    top: 0; left: -100%; /* Start off-screen */
    width: 100%; height: 100%;
    background: linear-gradient(90deg, hsla(var(--accent-hue-light), 90%, 70%, 0.1), transparent);
    transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1); /* Smooth slide */
    z-index: 0; /* Behind content */
}
.data-list-item:hover::before { left: 0; } /* Slide in on hover */
[data-theme="dark"] .data-list-item::before {
    background: linear-gradient(90deg, hsla(var(--accent-hue-dark), 80%, 80%, 0.1), transparent);
}

.data-list-item p { margin-bottom: 0.3rem; position: relative; z-index: 1; } /* Ensure text is above hover effect */
.data-list-item p:last-child { margin-bottom: 0; }
/* Label style within list items */
.list-label {
    font-weight: 600;
    color: var(--primary-color);
    opacity: 0.8;
    min-width: 90px; /* Minimum width for alignment */
    display: inline-block; /* Allow min-width */
    margin-right: 0.5rem; /* Space after label */
}

/* Scrollable List Container */
.scrollable-list {
    max-height: 350px; /* Default max height */
    overflow-y: auto; /* Enable vertical scroll */
    padding-right: 5px; /* Space for scrollbar */
    /* Firefox scrollbar styling */
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color) transparent;
}
/* Webkit scrollbar styling */
.scrollable-list::-webkit-scrollbar { width: 8px; }
.scrollable-list::-webkit-scrollbar-track { background: transparent; }
.scrollable-list::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }

/* List Placeholder (General, often for loading/error) */
.list-placeholder {
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
    padding: 2rem;
    border: 2px dashed var(--border);
    border-radius: var(--border-radius-md);
    margin-top: 1rem; /* Only add margin if it's not the only element */
}
/* Ensure placeholder doesn't add margin if it's the only thing */
.list-placeholder:only-child { margin-top: 0; }
/* Style skeleton elements within a placeholder */
.list-placeholder.skeleton-loader {
    opacity: 0.7; border-style: solid; /* Make border solid during loading */
}
.list-placeholder .skeleton { opacity: 1; background-color: var(--text-muted); }
[data-theme="dark"] .list-placeholder .skeleton { background-color: var(--border-dark); }

/* Style for specific 'no results' state */
.list-placeholder.no-results {
    text-align: center;
    padding: 2rem 1rem;
    color: var(--text-muted);
    border: none; /* No border for empty state */
    margin-top: 0;
}
.list-placeholder.no-results i { /* Icon for empty state */
    display: block;
    margin-bottom: 0.8rem;
    font-size: 2rem;
    opacity: 0.6;
}
.list-placeholder.no-results p {
    font-style: italic;
    font-size: 0.95rem;
    margin-bottom: 0;
}


/* --- Tabs --- */
.tab-navigation {
    display: flex;
    border-bottom: 2px solid var(--border);
    margin-bottom: 2rem;
    overflow-x: auto; /* Allow horizontal scroll on small screens */
    padding-bottom: 2px; /* Prevent tab underline cutting off */
    /* Scroll snapping for touch devices */
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}
/* Minimal scrollbar for tab navigation */
.tab-navigation::-webkit-scrollbar { height: 4px; }
.tab-navigation::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 2px; }

/* Individual Tab Link */
.tab-link {
    padding: 1rem 1.5rem;
    cursor: pointer;
    color: var(--text-muted);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    transition: var(--transition-smooth);
    border-bottom: 3px solid transparent; /* Placeholder for active state */
    margin-bottom: -2px; /* Overlap container border for seamless look */
    white-space: nowrap; /* Prevent wrapping */
    flex-shrink: 0; /* Prevent shrinking on small screens */
    display: inline-flex; /* Align icon and text */
    align-items: center;
    gap: 0.5em;
    scroll-snap-align: start; /* Align tabs to the start when scrolled */
}
.tab-link:hover { color: var(--text-primary); } /* Hover state */
/* Active Tab State */
.tab-link.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color); /* Active underline */
}
/* Focus visible state for tabs */
.tab-link:focus-visible {
    outline: 2px dashed var(--accent-color);
    outline-offset: 1px;
    border-radius: var(--border-radius-sm);
    z-index: 1; /* Ensure outline is visible */
}

/* Tab Content Pane */
.tab-pane {
    /* display: none; */ /* Controlled by 'hidden' attribute */
    opacity: 0;
    transition: opacity 0.3s ease-out;
    /* Consider adding min-height if needed to prevent collapse */
}
.tab-pane:not([hidden]) { /* Style when not hidden */
    opacity: 1;
    animation: contentFadeIn 0.4s ease forwards; /* Fade-in animation */
}


/* --- Search Input (Specific styling for patient search) --- */
.search-filter-wrapper {
    position: relative;
    flex-grow: 1; /* Allow search to take available space */
    max-width: 350px; /* Optional max width */
}
/* Small, rounded search input */
#patient-search-input.form-control-sm {
    padding: 0.5rem 1rem; /* Adjusted padding */
    padding-right: 2.5rem; /* Space for icon on the right */
    border-radius: var(--border-radius-pill); /* Rounded ends */
    border: 1px solid var(--border);
    background-color: var(--background-secondary);
    width: 100%; /* Take full width of its wrapper */
    font-size: 0.9rem;
    transition: var(--transition-smooth);
    box-shadow: var(--shadow-inset); /* Subtle inset shadow */
}
#patient-search-input.form-control-sm:focus {
     border-color: var(--accent-color);
     box-shadow: 0 0 0 3px hsla(var(--accent-hue-light), 91%, 66%, 0.3), var(--shadow-inset); /* Accent glow + inset shadow */
     background-color: var(--background-secondary);
}
[data-theme="dark"] #patient-search-input.form-control-sm:focus {
    box-shadow: 0 0 0 3px hsla(var(--accent-hue-dark), 87%, 78%, 0.3), var(--shadow-inset);
}
/* Search icon positioning */
.search-filter-wrapper .search-icon {
    position: absolute;
    right: 0.8rem; /* Position inside right padding */
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none; /* Don't block input interaction */
    font-size: 1rem; /* Match smaller input size */
    transition: color 0.2s ease;
}
/* Change icon color when input is focused */
.search-filter-wrapper:focus-within .search-icon { color: var(--accent-color); }


/* --- Tooltips --- */
[data-tooltip] {
  position: relative; /* Required for absolute positioning of tooltip */
}
/* Tooltip pseudo-element */
[data-tooltip]::after {
  content: attr(data-tooltip); /* Get text from data-tooltip attribute */
  position: absolute;
  bottom: 100%; /* Position above the element */
  left: 50%;
  transform: translateX(-50%) translateY(-5px); /* Center horizontally, position slightly above */
  background-color: hsl(var(--gray-hue-dark), 15%, 20%); /* Dark background */
  color: hsl(var(--gray-hue-dark), 20%, 95%); /* Light text */
  padding: 0.4em 0.8em; /* Padding around text */
  border-radius: var(--border-radius-md);
  font-size: 0.85rem; /* Small text */
  font-family: var(--font-body);
  font-weight: 400;
  text-transform: none; /* Normal case */
  letter-spacing: normal; /* Normal spacing */
  white-space: nowrap; /* Prevent wrapping */
  opacity: 0; /* Hidden by default */
  visibility: hidden; /* Hidden by default */
  transition: opacity 0.2s ease, visibility 0s linear 0.2s, transform 0.2s ease; /* Fade/move transition, delay visibility hide */
  pointer-events: none; /* Don't interfere with clicks */
  z-index: var(--z-index-tooltip); /* Ensure tooltip is on top */
  box-shadow: var(--shadow-md);
}
/* Light theme tooltip override */
[data-theme="light"] [data-tooltip]::after {
    background-color: var(--background-secondary-light);
    color: var(--text-primary-light);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border-light);
}

/* Show tooltip on hover/focus */
[data-tooltip]:hover::after,
[data-tooltip]:focus-visible::after {
  opacity: 1;
  visibility: visible;
  transform: translateX(-50%) translateY(-8px); /* Final position (slightly more offset) */
  transition-delay: 0s, 0s, 0s; /* Show immediately */
}


/* --- Modal Dialog --- */
.modal-backdrop {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: hsla(var(--gray-hue-dark), 23%, 11%, 0.6); /* Semi-transparent dark overlay */
    z-index: var(--z-index-modal-backdrop);
    opacity: 0; visibility: hidden; /* Hidden by default */
    transition: opacity 0.3s ease, visibility 0s linear 0.3s; /* Fade transition */
    backdrop-filter: blur(4px); /* Blur background */
    -webkit-backdrop-filter: blur(4px);
    display: flex; /* Center modal vertically and horizontally */
    align-items: center;
    justify-content: center;
    padding: 1rem; /* Padding around modal */
}
/* Explicit hidden state for JS control */
.modal-backdrop.hidden {
    opacity: 0; visibility: hidden; transition-delay: 0s; /* Ensure immediate hide */
}
/* Visible state */
.modal-backdrop:not(.hidden) {
    opacity: 1; visibility: visible; transition-delay: 0s; /* Show immediately */
}

/* Modal Dialog Box */
.modal {
    background-color: var(--background-secondary);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg); /* Prominent shadow */
    z-index: var(--z-index-modal);
    width: 100%; max-width: 550px; /* Max width */
    max-height: 90vh; /* Max height */
    display: flex; flex-direction: column; /* Stack header/body/footer */
    overflow: hidden; /* Clip content to rounded corners */
    transform: scale(0.95); opacity: 0; /* Initial state for animation */
    transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Scale/fade animation */
}
/* Visible modal animation state */
.modal-backdrop:not(.hidden) .modal {
    opacity: 1; transform: scale(1);
}

/* Modal Header */
.modal-header {
    padding: 1.2rem 1.5rem; border-bottom: 1px solid var(--border);
    display: flex; justify-content: space-between; align-items: center;
    flex-shrink: 0; /* Prevent shrinking */
}
/* Modal Title */
.modal-title {
    margin-bottom: 0; /* Override default heading margin */
    font-size: clamp(1.3rem, 2vw + 0.8rem, 1.6rem);
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: none; /* Normal case */
}
/* Modal Close Button */
.modal-header .close-button { /* Style specifically for close button in modal header */
    background: none; border: none; font-size: 1.8rem; font-weight: bold;
    line-height: 1; color: var(--text-muted); cursor: pointer;
    padding: 0.2rem 0.6rem; margin-left: 1rem; transition: var(--transition-smooth);
    border-radius: 50%; transform-origin: center center;
}
.modal-header .close-button:hover, .modal-header .close-button:focus {
    color: var(--warning-color); transform: rotate(90deg) scale(1.1);
    background-color: hsla(var(--warning-hue-light), 93%, 53%, 0.1); outline: none;
}
[data-theme="dark"] .modal-header .close-button:hover, [data-theme="dark"] .modal-header .close-button:focus {
    background-color: hsla(var(--warning-hue-dark), 96%, 60%, 0.1);
}

/* Modal Body (Scrollable) */
.modal-body {
    padding: 1.5rem 1.8rem; overflow-y: auto; /* Enable scroll if content overflows */
    flex-grow: 1; /* Allow body to take available space */
    /* Custom scrollbar styling */
    scrollbar-width: thin; scrollbar-color: var(--accent-color) transparent;
}
.modal-body::-webkit-scrollbar { width: 8px; }
.modal-body::-webkit-scrollbar-track { background: transparent; }
.modal-body::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }
.modal-body p:last-child { margin-bottom: 0; } /* Remove margin from last paragraph */

/* Modal Footer */
.modal-footer {
    padding: 1rem 1.5rem; border-top: 1px solid var(--border);
    text-align: right; /* Align buttons to the right */
    background-color: hsla(0, 0%, 0%, 0.02); /* Subtle background */
    flex-shrink: 0; /* Prevent shrinking */
}
[data-theme="dark"] .modal-footer { background-color: hsla(0, 0%, 100%, 0.03); }
.modal-footer .btn + .btn { margin-left: 0.8rem; } /* Space between buttons */


/* --- Skeleton Loaders --- */
.skeleton {
    background-color: var(--border); /* Use border color for base */
    border-radius: var(--border-radius-sm);
    position: relative; /* For pseudo-element animation */
    overflow: hidden; /* Contain shine animation */
    display: block; /* Ensure it takes block space */
}
/* Container for skeleton elements, hidden when content loaded */
.skeleton-loader {
    width: 100%;
}
.skeleton-loader.hidden { display: none; }

/* Shine animation */
.skeleton::before {
    content: ''; position: absolute; top: 0; left: -150%;
    height: 100%; width: 150%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent); /* Light theme shine */
    animation: skeleton-shine 1.5s infinite linear;
}
[data-theme='dark'] .skeleton::before {
     background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent); /* Dark theme shine */
}

/* Skeleton shapes */
.skeleton-text { height: 1em; margin-bottom: 0.5em; }
.skeleton-text:last-child { margin-bottom: 0; }
.skeleton-text-short { width: 60%; }
.skeleton-title { height: 1.5em; margin-bottom: 1em; width: 40%; }

/* Refined Skeleton for Info Items */
.info-item-skeleton {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 0.8rem; padding-bottom: 0.8rem; border-bottom: 1px dashed var(--border);
}
.info-item-skeleton:last-child { border-bottom: none; margin-bottom: 0; }
.info-item-skeleton .skeleton-label { height: 1em; width: 25%; } /* Example width */
.info-item-skeleton .skeleton-value { height: 1.1em; width: 60%; } /* Example width */

/* Refined Skeleton for List Items (e.g., Doctor's Patient List) */
.patient-list-item-skeleton {
    display: flex; justify-content: space-between; align-items: center;
    padding: 1rem 1.2rem; border-bottom: 1px solid var(--border);
}
.patient-list-item-skeleton:last-child { border-bottom: none; }
.patient-list-item-skeleton .skeleton-text:first-child { width: 65%; } /* Example width for name */
.patient-list-item-skeleton .skeleton-text:last-child { width: 25%; } /* Example width for age/ID */


/* Hide actual content when skeleton is active */
.skeleton-loader:not(.hidden) + .actual-content {
    display: none !important; /* Or visibility: hidden; if needed for layout */
}


/* --- Misc Components --- */
/* "View More" or Action Links */
.view-more-link, .action-link {
    display: inline-block;
    margin-top: 1.5rem; /* Space above link */
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative; /* For ripple */
    overflow: hidden;
    padding: 0.3rem 0.1rem; /* Slight padding for better click/touch */
}
.action-link i { margin-right: 0.3em; } /* Space icon */

/* Generic Close Button (e.g., for Doctor Details panel, Modal) */
.close-button {
    background: none; border: none; font-size: 1.8rem; font-weight: bold;
    line-height: 1; color: var(--text-muted); cursor: pointer;
    padding: 0.2rem 0.8rem; margin-left: 1rem; /* Space from other elements */
    transition: var(--transition-smooth);
    border-radius: 50%;
    position: relative; /* For ripple */
    overflow: hidden;
}
.close-button:hover, .close-button:focus {
    color: var(--warning-color); transform: rotate(90deg) scale(1.1);
    background-color: hsla(var(--warning-hue-light), 93%, 53%, 0.1);
    outline: none;
}
[data-theme="dark"] .close-button:hover, [data-theme="dark"] .close-button:focus {
    background-color: hsla(var(--warning-hue-dark), 96%, 60%, 0.1);
}

/* Loading Spinner (used in buttons) */
.loading-spinner {
    display: inline-block; width: 1.2em; height: 1.2em;
    border: 3px solid hsla(0, 0%, 100%, 0.3); /* Default light border */
    border-radius: 50%;
    border-top-color: var(--text-on-primary); /* Spinner color (for primary/accent) */
    animation: spin 0.8s linear infinite;
    vertical-align: middle; /* Align with text */
    position: absolute; /* Position centrally if text hidden */
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    margin: 0 !important; /* Override potential margins */
}
/* Spinner color for secondary buttons */
.btn-secondary .loading-spinner {
    border-color: hsla(var(--primary-hue-light), 68%, 40%, 0.3);
    border-top-color: var(--primary-color);
}
[data-theme="dark"] .btn-secondary .loading-spinner {
    border-color: hsla(var(--primary-hue-dark), 91%, 60%, 0.3);
    border-top-color: var(--primary-color-dark);
}

/* Hide button text and spinner when needed */
.btn .button-text.hidden + .loading-spinner { /* Ensure spinner is visible when text hidden */
    position: relative; /* Reset position to flow normally if needed, or keep absolute */
    left: auto; top: auto; transform: none; /* Reset transforms */
    /* display: inline-block; */ /* Could use this if absolute is not desired */
}
.btn .button-text.hidden { visibility: hidden; opacity: 0; } /* Hide text */
.btn .loading-spinner.hidden { display: none; } /* Hide spinner */


/* ==========================================================================
   6. Page Specific Styles
   ========================================================================== */

/* --- Login Page --- */
.login-page .main-content {
    display: flex; justify-content: center; align-items: center;
    min-height: calc(100vh - 80px); /* Fill viewport height minus footer */
    padding: 2rem 1rem;
}
.login-container { width: 100%; max-width: 480px; }
.login-form-wrapper {
    padding: 2rem clamp(1.5rem, 5vw, 2.5rem); /* Responsive padding */
    animation: slideUpFadeIn 0.6s 0.1s ease-out forwards; /* Entrance animation */
    opacity: 0; transform: translateY(20px); /* Initial state for animation */
}
.login-header { text-align: center; margin-bottom: 2.5rem; }
.login-header .portal-title { font-size: 2.5rem; margin-bottom: 0.3rem; }
.login-header .portal-subtitle { font-size: 1.15rem; }

/* Role Selector Buttons */
.role-selector {
    display: flex; justify-content: center; margin-bottom: 2rem;
    background-color: var(--background-secondary); border-radius: var(--border-radius-pill);
    padding: 6px; box-shadow: var(--shadow-inset); border: 1px solid var(--border);
}
.role-btn {
    flex: 1; padding: 0.7rem 1rem; border-radius: var(--border-radius-pill);
    background-color: transparent; color: var(--text-muted);
    font-weight: 600; text-transform: uppercase; font-size: 0.9rem;
    letter-spacing: 0.5px; transition: var(--transition-smooth);
    border: none; box-shadow: none; position: relative; /* For ripple */
    display: flex; align-items: center; justify-content: center; gap: 0.5em;
    overflow: hidden; /* Contain ripple */
}
.role-btn .icon-placeholder { font-size: 1.1em; }
/* Active role button style */
.role-btn.active {
    background: var(--gradient-accent); color: var(--text-on-accent); box-shadow: var(--shadow-sm);
}
[data-theme="dark"] .role-btn.active { color: var(--text-on-accent-dark); }
.role-btn:not(.active):hover { color: var(--primary-color); }

/* Doctor ID Field Visibility (Controlled by JS via 'visible' class) */
.form-group.doctor-only {
    transition: opacity 0.3s ease, max-height 0.3s ease, margin-bottom 0.3s ease, visibility 0s linear 0.3s; /* Smooth transition, delay visibility */
    max-height: 0; /* Collapsed by default */
    opacity: 0;
    overflow: hidden; /* Hide content when collapsed */
    margin-bottom: 0 !important; /* Collapse margin, important to override default */
    visibility: hidden;
}
.form-group.doctor-only.visible {
    max-height: 150px; /* Allow space for field + errors */
    opacity: 1;
    margin-bottom: 1.8rem !important; /* Restore margin when visible */
    visibility: visible;
    transition-delay: 0s;
}

.form-actions { margin-top: 2.5rem; }
.submit-btn { width: 100%; font-size: 1.1rem; padding: 0.9rem 1.5rem; }
.extra-options { text-align: center; margin-top: 1.8rem; }
.forgot-password-link { font-size: 0.9rem; color: var(--text-muted); }
.forgot-password-link:hover { color: var(--accent-color); }
.theme-toggle-login { text-align: center; margin-top: 1.5rem; }


/* --- Doctor Dashboard --- */
/* Grid layout definition */
.dashboard-grid-doctor {
    display: grid;
    gap: 1.8rem;
    /* Mobile-first: Single column layout */
    grid-template-areas:
        "docinfo"
        "schedule"
        "patients"
        "details";
}
/* Assign grid areas */
#doctor-info-card { grid-area: docinfo; }
#scheduled-visits-card { grid-area: schedule; }
#assigned-patients-card { grid-area: patients; }
#patient-details-section {
    grid-area: details;
    display: flex; /* Needed for flex-grow on content */
    flex-direction: column;
    /* Transitions for smooth appearance/disappearance on smaller screens */
    transition: opacity 0.3s ease, visibility 0s linear 0.3s, transform 0.3s ease;
    /* Initially hidden/controlled by JS setting aria-hidden */
    opacity: 0; visibility: hidden;
    transform: translateX(10px); /* Slight slide-in effect */
}
/* State when details are shown (aria-hidden=false) */
#patient-details-section:not([aria-hidden="true"]) {
    visibility: visible; opacity: 1; transform: translateX(0); transition-delay: 0s;
}
/* Allow details content to scroll if needed */
#patient-details-section .card-content {
    flex-grow: 1; /* Take available space */
    overflow-y: auto; /* Enable scroll IF content exceeds card height */
    /* Apply custom scrollbar */
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color) transparent;
}
#patient-details-section .card-content::-webkit-scrollbar { width: 8px; }
#patient-details-section .card-content::-webkit-scrollbar-track { background: transparent; }
#patient-details-section .card-content::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }

/* Apply padding inside details tab scrollable lists instead of card-content */
#patient-details-section .scrollable-list {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    /* Max height can be adjusted if needed */
    max-height: 250px; /* Example height for lists inside tabs */
}
/* Remove default padding from card-content inside the details section */
#patient-details-section > .card-content.card-padded {
    padding: 0; /* Remove padding, handle inside */
}
#patient-details-content {
     padding: 1.5rem; /* Add padding back to the main content area */
}


/* Placeholder when no patient is selected */
#patient-details-placeholder { text-align: center; color: var(--text-muted); padding: 2rem; }
#patient-details-placeholder i { display: block; margin-left: auto; margin-right: auto; }
/* Styling within the selected patient details */
#patient-details-content .patient-summary { margin-bottom: 1.5rem; border-bottom: 1px dashed var(--border); padding-bottom: 1rem;}
#patient-details-content .patient-meta-info { font-size: 0.95rem; color: var(--text-muted); }
/* Add recommendation form styling */
.add-recommendation-form, .log-visit-form { margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px dashed var(--border);}
#recommendation-form textarea, #log-visit-form textarea { min-height: 100px; }

/* Allow card header controls to wrap on smaller screens */
.doctor-dashboard .card-header.flex-wrap { flex-wrap: wrap; row-gap: 0.8rem; }
.doctor-dashboard .card-header-main { display: flex; align-items: center; gap: 1rem; flex-grow: 1; min-width: 200px;} /* Title/Icon part */
.doctor-dashboard .card-header-controls { display: flex; align-items: center; gap: 1rem; width: 100%; flex-wrap: wrap;} /* Controls part (search/sort) */

/* Sort Controls styling */
.sort-controls { display: flex; align-items: center; gap: 0.3rem; margin-left: auto; /* Push to right by default */ }
.sort-label { font-size: 0.85rem; font-weight: 600; color: var(--text-muted); margin-right: 0.2rem; }
.sort-btn { padding: 0.3rem 0.5rem; font-size: 1rem; line-height: 1; border-radius: var(--border-radius-sm); color: var(--text-muted); }
.sort-btn:hover, .sort-btn.active { color: var(--primary-color); background-color: hsla(var(--primary-hue-light), 68%, 40%, 0.08); }
[data-theme="dark"] .sort-btn:hover, [data-theme="dark"] .sort-btn.active { background-color: hsla(var(--primary-hue-dark), 91%, 60%, 0.1); }

/* Patient List Item (in doctor's view) */
.patient-list-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 1rem 1.2rem; border-bottom: 1px solid var(--border);
    cursor: pointer; transition: var(--transition-smooth); position: relative;
    overflow: hidden; /* Contain ripple and underline */
}
.patient-list-item:last-child { border-bottom: none; }
/* Underline animation for hover/selection */
.patient-list-item::after {
    content: ''; position: absolute; left: 0; bottom: 0;
    height: 2px; width: 0; background-color: var(--accent-color); transition: width 0.3s ease;
}
/* Hover and Selected state */
.patient-list-item:hover, .patient-list-item.selected {
    background-color: hsla(var(--primary-hue-light), 68%, 40%, 0.05);
    transform: translateX(5px); /* Slight shift */
}
.patient-list-item:hover::after, .patient-list-item.selected::after { width: 100%; } /* Show underline */
[data-theme="dark"] .patient-list-item:hover, [data-theme="dark"] .patient-list-item.selected { background-color: hsla(var(--primary-hue-dark), 91%, 60%, 0.1); }

.patient-list-item .patient-name { font-weight: 600; color: var(--text-primary); }
.patient-list-item .patient-age { font-size: 0.9em; color: var(--text-muted); margin-left: 0.5em; /* Space between name and age */}
.patient-list-item .arrow-icon { color: var(--text-muted); transition: transform 0.2s ease; }
.patient-list-item:hover .arrow-icon { transform: translateX(3px); color: var(--accent-color); }
/* Schedule Item Patient Link */
.schedule-item .patient-link { font-weight: 600; }
.schedule-item .patient-link:hover { color: var(--accent-color); }


/* --- Patient Dashboard --- */
/* Patient Journal Styles */
#patient-journal-card .text-muted i { margin-right: 0.4em; color: var(--accent-color); } /* Icon styling in journal note */
#journal-entries-list .data-list-item { display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem; }
#journal-entries-list .entry-content { flex-grow: 1; font-size: 0.95rem; color: var(--text-secondary); white-space: pre-wrap; word-break: break-word; } /* Allow wrapping */
#journal-entries-list .entry-meta { font-size: 0.8rem; color: var(--text-muted); text-align: right; flex-shrink: 0; white-space: nowrap; } /* Date/time */
#journal-entries-list .entry-meta span { display: block; } /* Stack date and time */

/* Doctor Notes List (Patient View) - similar to journal */
#doctor-notes-list .data-list-item {
    font-size: 0.95rem;
    color: var(--text-secondary);
    white-space: pre-wrap; /* Allow wrapping of notes */
    word-break: break-word;
    padding: 0.8rem 1rem;
}

/* Appointment Item Completion Marker */
.appointment-item {
    position: relative;
    padding-right: 0; /* Reset padding, button handled by flex */
    display: flex;
    justify-content: space-between;
    align-items: center; /* Vertically center content and button */
    gap: 1rem; /* Space between content and button */
}
.appointment-item > div { flex-grow: 1; } /* Allow text content to grow */
/* Completion toggle button styling */
.appointment-item .complete-toggle-btn {
    flex-shrink: 0; /* Prevent button from shrinking */
    /* margin-left: 1rem; */ /* Use gap in parent flex instead */
    padding: 0.4rem 0.6rem; font-size: 0.8rem; border-radius: var(--border-radius-sm);
    line-height: 1; border: 1px solid var(--border); background-color: var(--background-secondary);
    color: var(--text-muted); cursor: pointer; transition: var(--transition-smooth);
    width: 28px; height: 28px; /* Fixed size for circle/check */
    display: inline-flex; align-items: center; justify-content: center;
    position: relative; overflow: hidden; /* For ripple */
}
.appointment-item .complete-toggle-btn:hover { border-color: var(--secondary-color); color: var(--secondary-color); box-shadow: var(--shadow-sm); }
/* Completed appointment styling */
.appointment-item.completed { opacity: 0.7; background-color: hsla(var(--secondary-hue-light), 80%, 50%, 0.05); }
[data-theme="dark"] .appointment-item.completed { background-color: hsla(var(--secondary-hue-dark), 80%, 50%, 0.08); }
/* Completed toggle button state */
.appointment-item.completed .complete-toggle-btn { background-color: var(--secondary-color); color: var(--text-on-primary); border-color: var(--secondary-color); }
.appointment-item.completed .complete-toggle-btn .fa-check { display: inline-block; }
.appointment-item.completed .complete-toggle-btn .fa-circle { display: none; }
/* Default toggle button state */
.appointment-item:not(.completed) .complete-toggle-btn .fa-check { display: none; }
.appointment-item:not(.completed) .complete-toggle-btn .fa-circle { display: inline-block; }

/* Chart Controls */
#health-graphs-card .card-header { align-items: center; } /* Ensure alignment */
.chart-controls { margin-left: auto; } /* Push controls to the right */
.chart-controls .btn i { margin-right: 0.4em; }
.chart-controls .chart-type-text { font-size: 0.85em; display: none; } /* Hide text by default */
@media (min-width: 480px) { /* Show text on slightly larger screens */
    .chart-controls .chart-type-text { display: inline; }
}

/* Graph Placeholders & Canvas */
.graph-container-placeholder {
    position: relative; /* For positioning messages */
    min-height: 250px; /* Minimum height */
    display: flex; align-items: center; justify-content: center;
    width: 100%; /* Ensure it takes full width */
}
#patientChart { /* Canvas styling */
    max-width: 100%;
    max-height: 350px; /* Limit height */
    display: block; /* Remove extra space below canvas */
    width: 100%; /* Ensure canvas tries to fill container */
}
/* Loading and error messages positioning */
#graph-loading-message, #graph-error-message {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: calc(100% - 2rem); text-align: center; /* Prevent text overflow */
    /* Inherit styles from .list-placeholder */
    color: var(--text-muted); font-style: italic; padding: 1rem;
    border: none; /* Override potential border from .list-placeholder */
    margin-top: 0;
    background-color: var(--background-secondary); /* Ensure background matches card */
    border-radius: var(--border-radius-md);
}
/* Hide messages when not needed */
#graph-loading-message.hidden, #graph-error-message.hidden { display: none; }
#patientChart.hidden { display: none; } /* Hide canvas when loading/error */


/* ==========================================================================
   7. Utilities & Helpers
   ========================================================================== */

/* Screen reader only text */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
/* Text alignment */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
/* Visibility */
.hidden { display: none !important; }
.visible { display: block !important; } /* More forceful visible */
/* Display */
.block { display: block; }
.inline-block { display: inline-block; }
.flex { display: flex; }
.flex-wrap { flex-wrap: wrap; }
/* Flex alignment */
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
/* Positioning */
.relative { position: relative; }
.absolute { position: absolute; }
/* Sizing */
.w-full { width: 100%; }
.h-full { height: 100%; }
/* Margins */
.m-auto { margin: auto; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }

/* Neon Glow Text Utilities */
.neon-glow-primary { text-shadow: var(--neon-glow-primary); color: var(--primary-color); }
.neon-glow-secondary { text-shadow: var(--neon-glow-secondary); color: var(--secondary-color); }
.neon-glow-accent { text-shadow: var(--neon-glow-accent); color: var(--accent-color); }
/* Specific glow for header title */
.neon-glow-blue {
    color: hsl(217, 80%, 65%); /* Dark theme blue */
    text-shadow: 0 0 5px hsla(217, 90%, 70%, 0.8), 0 0 10px hsla(217, 90%, 70%, 0.6);
}
[data-theme="light"] .neon-glow-blue {
    color: hsl(217, 60%, 50%); /* Light theme blue */
    text-shadow: 0 0 3px hsla(217, 70%, 55%, 0.7), 0 0 6px hsla(217, 70%, 55%, 0.5);
}

/* Glowing text effect for footer */
.footer-text.glowing-text {
    animation: pulse-glow 3s ease-in-out infinite alternate;
    color: var(--accent-color);
}


/* ==========================================================================
   8. Animations
   ========================================================================== */

@keyframes pageFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes contentFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUpFadeIn {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes backgroundGradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes backgroundNoise {
    0% { transform: translate(0,0); }
    10% { transform: translate(-5%,-5%); }
    20% { transform: translate(-10%,5%); }
    50% { transform: translate(10%, -5%); }
    75% { transform: translate(-5%, 10%); }
    100% { transform: translate(5%,-10%); }
}

@keyframes ripple-animation {
    to { transform: scale(4); opacity: 0; }
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
}

@keyframes checkmark-pop {
    0% { transform: scale(0) rotate(45deg); }
    80% { transform: scale(1.2) rotate(45deg); }
    100% { transform: scale(1) rotate(45deg); }
}

/* Pulse-glow animation using CSS variables */
@keyframes pulse-glow {
    0%, 100% {
        text-shadow: var(--neon-glow-accent);
        opacity: 0.8;
    }
    50% {
        /* Example of enhancing the glow at peak */
        text-shadow: var(--neon-glow-accent), 0 0 15px var(--accent-color), 0 0 5px var(--text-on-primary);
        opacity: 1;
    }
}


@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
    100% { transform: translateY(0px); }
}

@keyframes skeleton-shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Animation utility classes */
.animated-glow { animation: pulse-glow 2.5s ease-in-out infinite; }
.animated-float { animation: float 3s ease-in-out infinite; }
.shake-animation { animation: shake 0.4s ease-in-out; }


/* ==========================================================================
   9. Media Queries
   ========================================================================== */

/* Medium devices (tablets, 768px and up) */
@media (min-width: 768px) {
    .container { padding: 0 2rem; } /* Increase horizontal padding */
    .main-content { padding-top: 110px; padding-bottom: 5rem; } /* Adjust padding for potentially taller header */
    /* Responsive grid columns */
    .grid-md-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-md-cols-3 { grid-template-columns: repeat(3, 1fr); }
    /* Patient dashboard grid */
    .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
    .portal-title-full { display: inline-block; } /* Ensure full title is shown */
    .login-container { max-width: 520px; }

    /* Doctor Dashboard Tablet Layout */
    .dashboard-grid-doctor {
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        /* Allow details to flow naturally or occupy its own row */
        grid-template-areas:
            "docinfo schedule"
            "patients patients" /* Span patients across */
            "details details";   /* Span details across */
    }
     /* Ensure details section isn't sticky on tablet */
     #patient-details-section { max-height: none; position: relative; top: auto; }
     /* Align controls to end, prevent wrapping */
     .doctor-dashboard .card-header-controls { width: auto; flex-grow: 1; justify-content: flex-end; flex-wrap: nowrap;}
     .sort-controls { margin-left: 0; }
}

/* Large devices (desktops, 1024px and up) */
@media (min-width: 1024px) {
    .container { padding: 0 3rem; }
    .main-content { padding-top: 120px; padding-bottom: 6rem; }
    /* Responsive grid columns */
    .grid-lg-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-lg-cols-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-lg-cols-4 { grid-template-columns: repeat(4, 1fr); }
    /* Patient dashboard grid */
    .dashboard-grid { grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); }
    .login-container { max-width: 480px; } /* Slightly smaller login box on large screens */

    /* Doctor Dashboard Desktop Layout */
    .dashboard-grid-doctor {
         grid-template-columns: 350px 1fr; /* Fixed left column, flexible right */
         grid-template-areas: /* 3-row structure with details spanning all rows */
            "docinfo details"
            "schedule details"
            "patients details";
         gap: 2.5rem; /* Increase gap */
         align-items: start; /* Align items to the top */
     }
     /* Make patient details sticky on desktop */
     #patient-details-section {
         max-height: calc(100vh - 160px); /* Viewport height minus header/footer/padding */
         position: sticky;
         top: 120px; /* Position below header */
         /* JS handles visibility via aria-hidden, CSS resets display/visibility if NOT hidden */
         transition: none !important; /* Disable transitions when sticky */
         display: flex !important; /* Ensure it's displayed as flex */
         visibility: visible !important; /* Ensure it's visible */
         opacity: 1 !important; /* Ensure full opacity */
         transform: none !important; /* Reset transform */
     }
    /* Hide details section if JS sets aria-hidden="true", even on large screens */
    #patient-details-section[aria-hidden="true"] {
         display: none !important; /* Completely remove from layout */
         visibility: hidden !important;
         opacity: 0 !important;
         position: relative !important; /* Reset sticky */
         top: auto !important;
    }

    /* Limit height and enable scroll for patient list on desktop */
     #assigned-patients-card {
         display: flex; flex-direction: column; /* Enable flex for content growth */
         /* Calculate max height based on siblings, adjust numbers as needed */
         max-height: calc(100vh - 160px - 220px); /* Approx: viewport - header/padding - info/schedule cards */
         min-height: 300px; /* Ensure minimum height */
     }
     #assigned-patients-card .card-content {
         flex-grow: 1; /* Allow content to fill space */
         overflow: hidden; /* Hide overflow before list scrolls */
         display: flex; flex-direction: column; /* Stack elements inside */
         padding-bottom: 0.5rem; /* Reduce bottom padding */
         padding-top: 0; /* Remove top padding if inner div has it */
         padding-left: 0;
         padding-right: 0;
    }
     #assigned-patients-list { /* The actual list container */
         max-height: none; /* Remove max-height */
         flex-grow: 1; /* Allow list to fill available vertical space */
         overflow-y: auto; /* Enable scrolling */
         /* Apply scrollbar styles */
         scrollbar-width: thin;
         scrollbar-color: var(--accent-color) transparent;
         /* Restore padding removed from parent */
         padding: 1rem 0 0.5rem 1rem; /* Adjust padding as needed */
     }
      #assigned-patients-list::-webkit-scrollbar { width: 8px; }
      #assigned-patients-list::-webkit-scrollbar-track { background: transparent; }
      #assigned-patients-list::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }

      /* Adjust schedule card scroll similarly */
      #scheduled-visits-card .card-content {
          padding: 0; /* Remove padding from outer content */
      }
      #scheduled-visits-list {
           /* Restore padding removed from parent */
          padding: 1rem 0 0.5rem 1rem; /* Adjust padding as needed */
          /* Ensure it respects the default max-height */
          max-height: 350px;
      }

}

/* Extra large devices (large desktops, 1440px and up) */
@media (min-width: 1440px) {
    .container { padding: 0 4rem; } /* Increase padding */
     .dashboard-grid { grid-template-columns: repeat(3, 1fr); } /* Patient grid: 3 columns */
     /* Doctor Dashboard Large Desktop Layout Adjustments */
     .dashboard-grid-doctor { grid-template-columns: 400px 1fr; } /* Wider left column */
      /* Adjust sticky top position and max-height if header/footer change */
      #patient-details-section { top: 130px; max-height: calc(100vh - 180px); }
      #assigned-patients-card { max-height: calc(100vh - 180px - 230px); }
}

/* Reduce Motion Preference */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
    animation-delay: -0.01ms !important;
  }
   /* Disable specific animations */
   .animated-float, .skeleton::before, .shake-animation, .ripple, .pulse-glow, .background-layer, .background-layer::before {
       animation: none !important;
    }
   /* Disable transform-based hover effects */
   .card-hover-lift:hover { transform: none !important; }
   .card:hover .card-icon { transform: none !important; }
   .icon-button:hover, .icon-button:focus { transform: none !important; }
   .close-button:hover, .close-button:focus { transform: none !important; }
   .btn-primary:hover, .btn-secondary:hover, .btn-accent:hover { transform: none !important; }
   .btn-primary:active, .btn-secondary:active, .btn-accent:active { transform: none !important; }
   .patient-list-item:hover { transform: none !important; }
}

/* --- Fix for Schedule Card Padding Issue --- */

/* Remove padding from card-content specifically for the schedule card */
#scheduled-visits-card .card-content {
    padding: 0; /* Remove padding */
}

/* Add padding directly to the schedule list UL */
#scheduled-visits-list {
    padding: 1rem 1.5rem; /* Apply standard padding here */
    /* Ensure scrollbar styles still apply if needed */
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color) transparent;
}
#scheduled-visits-list::-webkit-scrollbar { width: 8px; }
#scheduled-visits-list::-webkit-scrollbar-track { background: transparent; }
#scheduled-visits-list::-webkit-scrollbar-thumb { background-color: var(--accent-color); border-radius: 10px; }


/* Add padding to the placeholder elements INSIDE the schedule list */
#scheduled-visits-list .list-placeholder {
    padding: 2rem 1.5rem; /* Ensure placeholder has padding */
    margin-left: 0; /* Reset potential margins */
    margin-right: 0;
}

/* --- Fix for Assigned Patients Card Padding (Similar logic) --- */
/* Remove padding from card-content */
 #assigned-patients-card .card-content {
    padding: 0;
 }
 /* Add padding to the inner list container */
 #assigned-patients-list {
    padding: 1rem 1.5rem;
 }
  /* Add padding to the placeholder elements INSIDE the list */
 #assigned-patients-list .list-placeholder {
    padding: 2rem 1.5rem;
 }
/* END OF FILE style.css */